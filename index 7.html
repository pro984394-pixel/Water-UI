<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Water UI – Cómics</title>

<style>
body{font-family:Arial;margin:0;background:#f5f5f5;padding:15px}
header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}
.brand{font-size:34px;font-weight:bold}
.water{color:#000}
.ui{color:#1e40ff}
button{background:#1e40ff;color:#fff;border:none;border-radius:6px;padding:6px 10px;font-size:12px;cursor:pointer;margin:2px}
.hidden{display:none}
section{background:#fff;padding:15px;border-radius:10px;margin-bottom:15px}
.gallery{display:grid;grid-template-columns:repeat(auto-fill,90px);gap:10px}
.comic{border:1px solid #ccc;border-radius:6px;padding:4px;text-align:center;cursor:pointer}
.comic img{width:100%;height:120px;object-fit:cover}
input,select{width:100%;margin-top:6px;padding:6px}
.reader img{width:100%;max-height:80vh;object-fit:contain}
</style>
</head>

<body>

<header>
  <div class="brand"><span class="water">WATER</span> <span class="ui">UI</span></div>
  <div>
    <button onclick="show('gallery')">Galería</button>
    <button onclick="show('settings')">Ajustes</button>
  </div>
</header>

<section id="gallery">

  <h3>Administrador</h3>
  <input id="pwd" placeholder="Contraseña">
  <button onclick="login()">Entrar</button>

  <div id="adminPanel" class="hidden">
    <input id="comicName" placeholder="Nombre del cómic">
    <input id="comicFiles" type="file" multiple accept="image/*">
    <button onclick="publish()">Publicar cómic</button>
  </div>

  <hr>

  <div class="gallery" id="comicGallery"></div>
</section>

<section id="reader" class="hidden">
  <button onclick="show('gallery')">← Atrás</button>
  <h3 id="readerTitle"></h3>
  <div class="reader" id="readerImages"></div>
</section>

<section id="settings" class="hidden">
  <h2><span class="water">WATER</span> <span class="ui">UI</span></h2>
  <p id="version">1.0.3.0.5 TXBMIX</p>

  <label>Idioma / Language</label>
  <select onchange="setLang(this.value)">
    <option value="es">Español</option>
    <option value="en">English</option>
  </select>

  <button onclick="checkUpdate()">Buscar actualización</button>
</section>

<script>
const PASS="Marcosdavid1$";
let admin=false;
let comics=JSON.parse(localStorage.getItem("comics")||"[]");
let lang="es";

function show(id){
  gallery.classList.add("hidden");
  reader.classList.add("hidden");
  settings.classList.add("hidden");
  document.getElementById(id).classList.remove("hidden");
}

function login(){
  if(pwd.value===PASS){
    admin=true;
    adminPanel.classList.remove("hidden");
    alert("Administrador activado");
  }else alert("Contraseña incorrecta");
}

function publish(){
  if(!admin)return;
  if(!comicName.value)return alert("Pon nombre al cómic");
  if(comicFiles.files.length===0)return alert("Selecciona imágenes");
  if(comicFiles.files.length>20)return alert("Máx 20 imágenes");

  let comic={name:comicName.value,images:[]};
  let loaded=0;

  [...comicFiles.files].forEach(f=>{
    let r=new FileReader();
    r.onload=e=>{
      comic.images.push(e.target.result);
      loaded++;
      if(loaded===comicFiles.files.length){
        comics.push(comic);
        localStorage.setItem("comics",JSON.stringify(comics));
        comicName.value="";
        comicFiles.value="";
        draw();
        alert("Cómic publicado");
      }
    };
    r.readAsDataURL(f);
  });
}

function draw(){
  comicGallery.innerHTML="";
  comics.forEach((c,i)=>{
    let d=document.createElement("div");
    d.className="comic";
    d.onclick=()=>openComic(i);
    d.innerHTML=`<img src="${c.images[0]}"><div>${c.name}</div>`;
    comicGallery.appendChild(d);
  });
}

function openComic(i){
  readerImages.innerHTML="";
  readerTitle.textContent=comics[i].name;
  comics[i].images.forEach(img=>{
    readerImages.innerHTML+=`<img src="${img}">`;
  });
  show("reader");
}

function checkUpdate(){
  alert("Sistema actualizado (simulado)");
}

function setLang(l){
  lang=l;
  alert(l==="es"?"Idioma cambiado":"Language changed");
}

draw();
</script>

</body>
</html>